<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kegel Men</title>

<style>
:root {
  --primary:#38bdf8;
  --bg:#020617;
  --card:#0f172a;
  --text:#f8fafc;
  --muted:#94a3b8;
}

body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.app { width:100%; max-width:420px; padding:16px; }
.card {
  background:var(--card);
  border-radius:22px;
  padding:20px;
}

h1 { text-align:center; color:var(--primary); }

select,button {
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:14px;
  border:none;
  font-size:16px;
}

select { background:#1e293b; color:white; }
button { background:var(--primary); color:#020617; font-weight:600; }
button.secondary { background:#334155; color:white; }

.hidden { display:none; }

.progress {
  width:180px; height:180px;
  margin:20px auto;
  border-radius:50%;
  border:10px solid #1e293b;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}

.state { font-size:20px; font-weight:600; }
.time { font-size:40px; }

.info { font-size:13px; color:var(--muted); text-align:center; margin-top:8px; }

.discreet body,
.discreet .card {
  background:black !important;
  color:black !important;
}
</style>
</head>

<body>
<div class="app">
  <div class="card">
    <h1>Kegel Men</h1>

    <select id="routine">
      <option value="">Selecciona rutina</option>
      <option value="medical">ü©∫ M√©dica</option>
      <option value="sexual">‚ù§Ô∏è Sexual</option>
      <option value="prostate">üß† Post-pr√≥stata</option>
    </select>

    <div class="progress">
      <div class="state" id="state">Listo</div>
      <div class="time" id="time">‚Äì</div>
    </div>

    <div class="info" id="info"></div>

    <button id="start" disabled>Iniciar</button>
    <button class="secondary" id="discreet">Modo discreto üåô</button>
    <button class="secondary" id="history">Historial üìÜ</button>
  </div>
</div>

<script>
const routines = {
 medical:{h:5,r:5,n:10,t:"Control urinario. No forzar."},
 sexual:{h:7,r:5,n:12,t:"Rendimiento sexual. M√°x 2/d√≠a."},
 prostate:{h:3,r:6,n:8,t:"Rehabilitaci√≥n post cirug√≠a."}
};

let phase,time,rep,routine,intv;

const stateEl=timeEl=infoEl=null;
const state=document.getElementById("state");
const timeEl=document.getElementById("time");
const info=document.getElementById("info");
const start=document.getElementById("start");

document.getElementById("routine").onchange=e=>{
 routine=routines[e.target.value];
 if(!routine) return;
 info.textContent=routine.t+" ‚ö†Ô∏è Si hay dolor, suspender.";
 start.disabled=false;
};

start.onclick=()=>{
 rep=0; phase="hold"; time=routine.h;
 start.disabled=true;
 tick();
 intv=setInterval(tick,1000);
};

function tick(){
 navigator.vibrate?.(50);
 timeEl.textContent=time;
 state.textContent=phase==="hold"?"Contrae":"Relaja";
 time--;
 if(time<0){
  if(phase==="hold"){phase="relax";time=routine.r;}
  else{
   rep++;
   if(rep>=routine.n){finish();return;}
   phase="hold";time=routine.h;
  }
 }
}

function finish(){
 clearInterval(intv);
 state.textContent="Completado ‚úî";
 timeEl.textContent="‚úì";
 saveHistory();
 start.disabled=false;
}

function saveHistory(){
 const d=new Date().toLocaleDateString();
 const h=JSON.parse(localStorage.getItem("kegelHistory")||"{}");
 h[d]=(h[d]||0)+1;
 localStorage.setItem("kegelHistory",JSON.stringify(h));
}

document.getElementById("history").onclick=()=>{
 const h=JSON.parse(localStorage.getItem("kegelHistory")||"{}");
 alert("Historial:\n"+Object.entries(h).map(e=>`${e[0]}: ${e[1]}`).join("\n"));
};

document.getElementById("discreet").onclick=()=>{
 document.documentElement.classList.toggle("discreet");
};
</script>
</body>
</html>
