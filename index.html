<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kegel Men</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#020617;
  color:#f8fafc;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#0f172a;
  width:100%;
  max-width:420px;
  padding:16px;
  border-radius:22px;
}
h1{text-align:center;color:#38bdf8;margin:4px 0;}
select,button,input{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
select,input{background:#1e293b;color:white;}
button{background:#38bdf8;color:#020617;font-weight:600;}
.secondary{background:#334155;color:white;}
.small{text-align:center;font-size:12px;color:#cbd5f5;}
.chat{
  background:#020617;
  border-radius:14px;
  padding:8px;
  height:160px;
  overflow-y:auto;
  font-size:13px;
  margin-top:8px;
}
.msg-user{color:#38bdf8;margin:4px 0;}
.msg-ai{color:#a7f3d0;margin:4px 0;}
</style>
</head>

<body>
<div class="card">
<h1>Kegel Men</h1>

<select id="profileSelect"></select>
<input id="newProfile" placeholder="Nuevo perfil (nombre)" />
<button onclick="createProfile()">Crear perfil</button>

<select id="program">
  <option value="">Elegir programa</option>
  <option value="micro">âš¡ Micro</option>
  <option value="normal">ðŸŸ¢ Normal</option>
  <option value="medium">ðŸŸ¡ Medio</option>
  <option value="long">ðŸ”µ Extenso</option>
</select>

<div class="small" id="programInfo"></div>

<button id="start" disabled>Iniciar</button>

<div class="chat" id="chat"></div>
<input id="chatInput" placeholder="Habla con tu coachâ€¦" />
<button class="secondary" onclick="sendMsg()">Enviar ðŸ’¬</button>

<div class="small">Privado Â· Local Â· Sin servidores</div>
</div>

<script>
/* ============ PROGRAMAS ============ */
const programs={
 micro:{h:3,r:3,reps:10},
 normal:{h:5,r:5,reps:20},
 medium:{h:6,r:6,reps:30},
 long:{h:7,r:7,reps:35}
};

/* ============ PERFILES ============ */
function getProfiles(){
 return JSON.parse(localStorage.getItem("profiles")||"{}");
}
function saveProfiles(p){
 localStorage.setItem("profiles",JSON.stringify(p));
}

let profiles=getProfiles();
let currentProfile=null;

function refreshProfiles(){
 const sel=document.getElementById("profileSelect");
 sel.innerHTML="";
 Object.keys(profiles).forEach(n=>{
  const o=document.createElement("option");
  o.value=n;o.textContent=n;
  sel.appendChild(o);
 });
 if(currentProfile) sel.value=currentProfile;
}

function createProfile(){
 const name=document.getElementById("newProfile").value.trim();
 if(!name||profiles[name]) return;
 profiles[name]={coachStyle:runTest(),log:{}};
 saveProfiles(profiles);
 currentProfile=name;
 refreshProfiles();
 addMsg("Perfil creado. AjustÃ© tu coach automÃ¡ticamente.","ai");
}

document.getElementById("profileSelect").onchange=e=>{
 currentProfile=e.target.value;
 addMsg("Perfil cargado.","ai");
};

/* ============ TEST INICIAL ============ */
function runTest(){
 const q1=confirm("Â¿Te preocupa hacerlo correctamente?");
 const q2=confirm("Â¿Buscas motivaciÃ³n constante?");
 if(q1 && q2) return "mixed";
 if(q1) return "clinical";
 if(q2) return "emotional";
 return "fitness";
}

/* ============ CHAT ============ */
const chat=document.getElementById("chat");
function addMsg(t,type){
 const d=document.createElement("div");
 d.className=type==="user"?"msg-user":"msg-ai";
 d.textContent=t;
 chat.appendChild(d);
 chat.scrollTop=chat.scrollHeight;
}
addMsg("Crea o elige un perfil para comenzar.","ai");

function coachResponse(text){
 if(!currentProfile) return "Primero crea o selecciona un perfil.";
 const style=profiles[currentProfile].coachStyle;
 if(style==="clinical") return "ConcÃ©ntrate en tÃ©cnica y respiraciÃ³n.";
 if(style==="emotional") return "Estoy contigo. Paso a paso.";
 if(style==="fitness") return "Vamos, cada sesiÃ³n suma.";
 return "Hoy mezclamos tÃ©cnica y motivaciÃ³n. Buen enfoque.";
}

function sendMsg(){
 const i=document.getElementById("chatInput");
 const t=i.value.trim();
 if(!t)return;
 addMsg(t,"user");
 i.value="";
 setTimeout(()=>addMsg(coachResponse(t),"ai"),300);
}

/* ============ INICIO ============ */
refreshProfiles();
</script>
</body>
</html>
